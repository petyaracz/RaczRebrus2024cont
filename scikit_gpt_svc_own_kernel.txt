from sklearn.svm import SVC
import numpy as np

# Suppose distances is your precomputed pairwise distance matrix
# for 100 observations
# distances = np.array([...])
# Convert distances to a kernel matrix using an RBF kernel
gamma = 0.5  # Example value for gamma, you should tune this
kernel_matrix = np.exp(-gamma * distances**2)

# Create your label array for 100 observations
y = np.array([...])  # Your target labels

# Number of observations
n_samples = len(y)

# Placeholder for storing predictions
predictions = np.zeros(n_samples)

# Perform leave-one-out cross-validation
for i in range(n_samples):
    # Indices for training and testing
    train_index = np.arange(n_samples) != i
    test_index = i
    
    # Create train and test kernel matrices
    K_train = kernel_matrix[train_index][:, train_index]
    K_test = kernel_matrix[test_index, train_index].reshape(1, -1)
    
    # Train the SVC with precomputed kernel
    svc = SVC(kernel='precomputed')
    svc.fit(K_train, y[train_index])
    
    # Predict the left-out observation
    predictions[i] = svc.predict(K_test)

# Evaluate performance
accuracy = np.mean(predictions == y)
print(f'LOOCV Accuracy: {accuracy * 100:.2f}%')